import{m as S,S as n,B as p,u as A,r as a,j as s,d as t,H as h,i as z,E,A as P,k as j,n as q,cg as v,T as g,ch as R,q as k,ci as B,e as I,P as T,cj as M,ck as D}from"./index.996e1d78.js";const H=S(n);S(p);const L={hidden:{scale:0},animate:{scale:1,transition:{staggerChildren:.5,delayChildren:.4}}},Q=()=>{const i=A(),[c,b]=a.exports.useState(1),[d,w]=a.exports.useState(10),[l,y]=a.exports.useState([]),[m,F]=a.exports.useState("all"),r=a.exports.useMemo(()=>{switch(m){case"all":return l;case"pending":return l.filter(e=>e.status==="pending");case"completed":return l.filter(e=>e.status==="completed");default:return l}},[m,l]),f=async()=>{try{const{data:e}=await M(c,d);if(e.error)return i({title:"Error",status:"error",message:e.message,duration:3e3,isClosable:!0,position:"bottom-right"});if(e.status)return y(e.data),i({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"})}catch(e){console.log(e),i({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},C=async e=>{var u,x;try{if(!e)return;const{data:o}=await D(e);if(o.error)return i({title:"Error",description:o.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});i({title:"Success",description:o.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"}),f()}catch(o){console.error(o),i({title:"Error",description:((x=(u=o==null?void 0:o.response)==null?void 0:u.data)==null?void 0:x.message)||"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}};return a.exports.useEffect(()=>{f()},[c,d]),s(p,{sx:{minHeight:"90vh",display:"flex",flexDirection:"column",pb:4},children:[t(n,{direction:"row",justifyContent:"space-between",children:s(h,{color:"gray.600",children:["Support Requests: ",r.length]})}),s(H,{variants:L,initial:"hidden",animate:"animate",direction:"column",spacing:2,sx:{px:{sm:2,lg:6},pt:4},children:[r.length===0&&s(n,{direction:"column",spacing:3,justifyContent:"center",alignItems:"center",h:"80vh",children:[t(z,{animationData:E,autoPlay:!0,loop:!0,style:{height:"60vh",width:"60vw"}}),t(h,{children:"No Requests Found"})]}),t(P,{defaultIndex:[0],children:t(n,{spacing:5,children:r==null?void 0:r.map(e=>s(j,{rounded:"lg",boxShadow:"lg",bg:"white",children:[t(q,{_focus:{border:"0px"},children:s(n,{direction:"row",justifyContent:"space-between",w:"100%",children:[s(n,{spacing:2,children:[t(v,{w:"fit-content",colorScheme:"blue",children:e.status}),s(h,{textAlign:"left",color:"gray.600",fontSize:"md",children:[e.message.substring(0,50),"..."]}),s(n,{spacing:1,children:[s(g,{fontSize:"xs",color:"gray.500",textAlign:"left",children:["Queried By: ",t("strong",{children:e.name})]}),s(g,{fontSize:"xs",color:"gray.500",textAlign:"left",children:["Email: ",t("strong",{children:e.email})]}),s(g,{fontSize:"xs",color:"gray.500",textAlign:"left",children:["Phone: ",t("strong",{children:e.phone})]})]})]}),t(R,{})]})}),s(k,{pb:4,children:[t(B,{}),s(n,{spacing:1,children:[t(g,{fontSize:"md",color:"gray.600",textAlign:"left",fontWeight:"bold",mt:2,children:e.message}),e.status!=="completed"&&t(I,{w:"fit-content",colorScheme:"blue",size:"sm",alignSelf:"flex-end",onClick:()=>C(e._id),children:"MARK COMPLETE"})]})]})]}))})})]}),t(p,{sx:{},children:r.length>=d||c>1?t(T,{defaultPageSize:d,defaultPage:c,total:1e6,paginationProps:{display:"flex",justifyContent:"center",marginTop:"2em"},pageNeighbours:1,showQuickJumper:!0,responsive:!0,onChange:e=>b(e),onShowSizeChange:(e,u)=>w(parseInt(u)),showSizeChanger:!0}):null})]})};export{Q as default};
