import{D as Q}from"./index.esm.a1830a40.js";import{F as fe,a as Fe}from"./index.esm.2c397c46.js";import{m as oe,S as r,B as N,e as be,u as xe,r as a,f as ze,R as ee,j as n,b as t,H as c,I as l,c as p,g as we,E as Me,i as o,o as h,n as A,t as De,a6 as Ie,T as s,O as Ye,ap as ke,aq as te,a4 as ne,ar as re,q as z,aR as Ee,P as Re,b7 as Ae,b0 as Ne}from"./index.9689f1a6.js";import{T as ie}from"./index.esm.2a4190d7.js";import"./iconBase.67066edd.js";const ae=oe(r),Te=oe(N),Ge={hidden:{scale:0},animate:{scale:1,transition:{staggerChildren:.5,delayChildren:.4}}},He={hidden:{opacity:0},animate:{opacity:1}},je=()=>{const w=be(),g=xe(),[M,T]=a.exports.useState(null),[D,le]=a.exports.useState(1),[I,se]=a.exports.useState(10),[Y,ce]=a.exports.useState([]);a.exports.useState(null),a.exports.useState(null),a.exports.useState(!1),a.exports.useState(!1),ze();const[v,G]=a.exports.useState("update"),[H,P]=a.exports.useState("HIGH"),[d,S]=a.exports.useState([]),[B,de]=a.exports.useState("SHORT"),[ge,pe]=a.exports.useState(0),L=ee.useRef(null),O=ee.useRef(null),[C,k]=a.exports.useState(null),[f,E]=a.exports.useState(null),[U,j]=a.exports.useState(""),[he,W]=a.exports.useState(""),[ue,_]=a.exports.useState(""),[me,J]=a.exports.useState(0),[F,ye]=a.exports.useState(""),[b,x]=a.exports.useState({oneYear:0,threeYears:0,fiveYears:0}),[u,m]=a.exports.useState({threeMonths:0,sixMonths:0,oneYear:0,threeYears:0,fiveYears:0}),R=a.exports.useMemo(()=>F.trim()?Y.filter(e=>e.name.toLowerCase().includes(F.toLowerCase())):Y,[Y,F]),Se=()=>{j(""),W(""),_(""),J(0),x({oneYear:0,threeYears:0,fiveYears:0}),m({threeMonths:0,sixMonths:0,oneYear:0,threeYears:0,fiveYears:0}),k(null),E(null),T(null),S([]),P("HIGH")},ve=async()=>{try{const e=new FormData;e.append("name",U),e.append("description",he),e.append("shortDescription",ue),e.append("minimumInvestment",me),e.append("riskCategory",H),e.append("duration",B),e.append("cagr",JSON.stringify(b)),e.append("returns",JSON.stringify(u)),e.append("dailyChangeFile",C),e.append("fundGraphFile",f),e.append("shares",JSON.stringify(d)),e.append("fundImageFile",M);const{data:i}=await Ae(e);console.log(i),i.status&&(g({title:"Fund Created Successfully",status:"success",duration:5e3,isClosable:!0,position:"bottom-right"}),Se()),i.status||g({title:i.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-right"})}catch(e){g({title:"Error",description:e.message,status:"error",duration:9e3,isClosable:!0})}},Ce=async()=>{try{const{data:e}=await Ne(D,I);return e.error?g({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"}):(ce(e.data),pe(e.count),g({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"}))}catch(e){console.log(e),g({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}};return a.exports.useEffect(()=>{Ce()},[D,I]),n(N,{sx:{minHeight:"90vh",display:"flex",flexDirection:"column",pb:4},children:[n(r,{direction:"row",spacing:1,justifyContent:"space-between",children:[t(c,{fontSize:"4xl",mb:5,children:"CREATE / UPDATE FUNDS"}),n(r,{direction:"row",spacing:1,children:[t(l,{placeholder:"Search",value:F,onChange:e=>ye(e.target.value),alignSelf:"center",maxW:"120px"}),v==="create"?t(p,{sx:{alignSelf:"center"},variant:"outline",onClick:()=>G("update"),alignSelf:"center",children:"Update Funds"}):t(p,{colorScheme:"blue",sx:{alignSelf:"center"},alignSelf:"center",onClick:()=>G("create"),children:"Add New Fund"})]})]}),v==="update"&&n(ae,{variants:Ge,initial:"hidden",animate:"animate",direction:"column",spacing:2,sx:{px:{sm:2,lg:6},pt:4},children:[R.length===0&&n(r,{direction:"column",spacing:3,justifyContent:"center",alignItems:"center",h:"80vh",children:[t(we,{animationData:Me,autoPlay:!0,loop:!0,style:{height:"60vh",width:"60vw"}}),t(c,{children:"No funds Found"})]}),R.map((e,i)=>{var y,V,X,Z,$,q,K;return n(Te,{variants:He,px:8,py:4,rounded:"lg",shadow:"lg",bg:o("white","gray.800"),maxW:"100%",children:[n(r,{direction:"row",spacing:2,justifyContent:"space-between",children:[n(r,{spacing:2,direction:"row",children:[t(h,{size:"md",variant:"solid",variantColor:"green",px:3,bg:e.trending?"green.700":"red.800",color:"gray.100",fontSize:"sm",fontWeight:"700",rounded:"md",children:e.trending?"Trending":"Not Trending"}),t(h,{size:"md",variant:"solid",variantColor:"green",px:3,fontSize:"sm",fontWeight:"700",rounded:"md",children:e.duration})]}),t(c,{fontSize:"md",color:"blue.400",textDecoration:"underline",cursor:"pointer",children:e==null?void 0:e.name})]}),n(r,{direction:"row",spacing:2,mt:2,divider:t(A,{}),justifyContent:"space-evenly",children:[n(r,{direction:"column",spacing:1,children:[t(c,{fontSize:"md",children:"Minimum Investment"}),t(c,{fontSize:"sm",children:De((e==null?void 0:e.minimumInvestment)||0)})]}),n(r,{direction:"column",spacing:1,children:[t(c,{fontSize:"md",children:"CAGR"}),n(r,{direction:"row",spacing:2,children:[n(h,{size:"sm",variantColor:"green",variant:"solid",children:[(V=(y=e==null?void 0:e.cagr)==null?void 0:y.oneYear)==null?void 0:V.toFixed(2),"%"]}),n(h,{size:"sm",variantColor:"green",variant:"solid",children:[(Z=(X=e==null?void 0:e.cagr)==null?void 0:X.threeYears)==null?void 0:Z.toFixed(2),"%"]}),n(h,{size:"sm",variantColor:"green",variant:"solid",children:[(q=($=e==null?void 0:e.cagr)==null?void 0:$.fiveYears)==null?void 0:q.toFixed(2),"%"]})]})]}),n(r,{direction:"column",spacing:1,children:[t(c,{fontSize:"md",children:"Enrolled By: "}),n(c,{fontSize:"sm",children:[(K=e==null?void 0:e.enrolled)==null?void 0:K.length," People"]})]}),n(r,{direction:"column",spacing:1,children:[n(c,{fontSize:"md",children:["RISK",t("br",{}),"CATEGORY"]}),t(h,{size:"sm",colorScheme:e.riskCategory==="HIGH"&&"red"||e.riskCategory==="MEDIUM"&&"yellow"||e.riskCategory==="LOW"&&"green",children:e==null?void 0:e.riskCategory})]})]}),n(Ie,{justifyContent:"space-around",alignItems:"center",mt:4,children:[n(s,{fontSize:"sm",noOfLines:0,color:o("gray.600","gray.400"),children:["Created: ",Ye(e==null?void 0:e.createdAt).format("dddd, DD MMMM YYYY")]}),t(p,{color:o("brand.600","brand.400"),_hover:{bg:"green.700"},size:"sm",variant:"outline",onClick:()=>{w(`/fund/${e._id}`)},children:"Details"}),t(p,{color:o("brand.600","brand.400"),_hover:{bg:"green.700"},size:"sm",variant:"outline",onClick:()=>{w(`/update/fund/${e._id}`)},children:"Update"}),t(p,{color:o("brand.600","brand.400"),_hover:{bg:"green.700"},size:"sm",variant:"outline",onClick:()=>{w(`/buy/${e._id}`)},children:"Buy"})]})]},i+e._id)})]}),v==="create"&&n(ae,{direction:"column",spacing:5,mt:10,children:[t(c,{fontSize:"2xl",color:o("gray.500","gray.200"),children:"Please Fill Below details properly to create a new FUND."}),n(ke,{columns:[1,1,2,2],spacing:5,p:3,children:[t(te,{children:n(r,{direction:"column",spacing:6,divider:t(A,{}),children:[n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Name:"," "]}),t(l,{placeholder:"Enter Fund Name",onChange:e=>j(e.target.value),variant:"filled"})]}),n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Short Description:"," "]}),t(l,{placeholder:"Enter Fund Short Description",variant:"filled",onChange:e=>_(e.target.value)})]}),n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Long Description:"," "]}),t(l,{placeholder:"Enter Fund Long Description",variant:"filled",onChange:e=>W(e.target.value)})]}),n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Minimum Investment:"," "]}),t(l,{placeholder:"Enter Fund Minimum Investment",variant:"filled",type:"number",onChange:e=>J(e.target.value)})]}),n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Risk Category:"," "]}),t(r,{direction:"row",children:["HIGH","MEDIUM","LOW"].map((e,i)=>n(h,{size:"md",variant:"solid",px:3,py:2,colorScheme:i===0&&"red"||i===1&&"green"||i===2&&"blue",as:"button",onClick:()=>P(e),children:[t(ne,{children:e}),e===H&&t(re,{as:ie})]},i+e))})]}),n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Duration:"," "]}),t(r,{direction:"row",children:["SHORT","MEDIUM","LONG"].map((e,i)=>n(h,{size:"md",variant:"solid",px:3,py:2,colorScheme:i===0&&"red"||i===1&&"green"||i===2&&"blue",as:"button",onClick:()=>de(e),children:[t(ne,{children:e}),e===B&&t(re,{as:ie})]},i+e))})]}),n(r,{direction:"column",spacing:4,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Shares Allocation:"," "]}),n(r,{direction:"row",spacing:2,children:[t(s,{sx:{alignSelf:"center"},children:"ADD NEW SHARE ALLOCATION"}),t(z,{size:"sm",onClick:()=>S([...d,{name:"",allocation:0}]),children:t(fe,{})})]}),d.map((e,i)=>t(r,{direction:"column",spacing:4,children:n(r,{direction:"row",spacing:2,children:[t(l,{variant:"filled",placeholder:"Enter Name",value:d[i].name,type:"text",onChange:y=>{e.name=y.target.value,S([...d])}}),t(l,{variant:"filled",placeholder:"Enter Allocation",value:e.allocation,type:"number",onChange:y=>{d[i].allocation=parseFloat(y.target.value),S([...d])}}),i!==0&&t(z,{size:"sm",sx:{alignSelf:"center"},onClick:()=>{d.splice(i,1),S([...d])},children:t(Fe,{})})]})},i))]})]})}),t(te,{children:n(r,{direction:"column",spacing:6,divider:t(A,{}),children:[n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund CAGR:"," "]}),n(r,{direction:"row",spacing:2,children:[t(l,{placeholder:"1 Yr",variant:"filled",type:"number",onChange:e=>x({...b,oneYear:parseFloat(e.target.value)})}),t(l,{placeholder:"3 Yrs",onChange:e=>x({...b,threeYears:parseFloat(e.target.value)}),variant:"filled",type:"number"}),t(l,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>x({...b,fiveYears:parseFloat(e.target.value)})})]})]}),n(r,{direction:"column",spacing:2,children:[n(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:["Fund Returns:"," "]}),n(r,{direction:"row",spacing:2,children:[t(l,{placeholder:"3 Months",onChange:e=>m({...u,threeMonths:parseFloat(e.target.value)}),variant:"filled",type:"number"}),t(l,{placeholder:"6 Months",onChange:e=>m({...u,sixMonths:parseFloat(e.target.value)}),variant:"filled",type:"number"})]}),n(r,{direction:"row",spacing:2,children:[t(l,{placeholder:"1 Yr",variant:"filled",type:"number",onChange:e=>m({...u,oneYear:parseFloat(e.target.value)})}),t(l,{placeholder:"3 Yrs",variant:"filled",type:"number",onChange:e=>m({...u,threeYears:parseFloat(e.target.value)})}),t(l,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>m({...u,fiveYears:parseFloat(e.target.value)})})]})]}),n(r,{direction:"column",spacing:2,children:[t(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:"Fund Daily Change File: (.csv files only, MAX SIZE: 2MB)"}),t(l,{ref:L,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return g({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});k(e.target.files[0])}}),n(r,{spacing:2,direction:"row",children:[n(s,{color:o("gray.600","gray.200"),alignSelf:"center",children:["Uploaded: ",C&&C.name]}),C&&t(z,{onClick:()=>k(null),children:t(Q,{})})]}),t(p,{variant:"outline",onClick:()=>L.current.click(),children:"Upload File"})]}),n(r,{direction:"column",spacing:2,children:[t(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:"Fund Graph File: (.csv files only, MAX SIZE: 2MB)"}),t(l,{ref:O,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return g({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});E(e.target.files[0])}}),n(r,{spacing:2,direction:"row",children:[n(s,{color:o("gray.600","gray.200"),alignSelf:"center",children:["Uploaded: ",f&&f.name]}),f&&t(z,{onClick:()=>E(null),children:t(Q,{})})]}),t(p,{variant:"outline",onClick:()=>O.current.click(),children:"Upload File"})]}),n(r,{spacing:2,children:[t(s,{fontSize:"lg",color:o("gray.500","gray.400"),children:"Fund Image: (.png files only, MAX SIZE: 2MB)"}),M&&t(Ee,{objectFit:"contain",w:"100px",h:"70px",src:M,alt:U,fallbackSrc:"https://via.placeholder.com/150"}),t(l,{type:"file",onChange:e=>T(e.target.files[0])})]}),t(p,{variant:"outline",onClick:ve,children:"CREATE FUND"})]})})]})]}),v==="update"&&t(N,{children:R.length>0&&t(Re,{defaultPageSize:I,defaultPage:D,total:ge,paginationProps:{display:"flex",justifyContent:"center",marginTop:"2em"},pageNeighbours:1,showQuickJumper:!0,responsive:!0,onChange:e=>le(e),onShowSizeChange:(e,i)=>se(parseFloat(i)),showSizeChanger:!0})})]})};export{je as default};
