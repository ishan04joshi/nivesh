import{m as J,S as l,B as g,u as it,r as s,f as st,R as lt,j as o,M as dt,C as ct,b as n,D as ht,F as ut,G as gt,J as mt,K as pt,H as c,o as B,aS as bt,a4 as Y,T as i,i as h,t as p,n as G,ap as M,aT as T,aU as r,c as u,as as N,N as St,av as Ct,I as wt,a5 as yt,g as xt,E as ft,a6 as K,O as kt,P as vt,aV as At,aW as Tt,aX as Nt,aY as Et,aZ as zt,a_ as It}from"./index.9689f1a6.js";import{B as W}from"./index.esm.6a6bb189.js";import{a as Bt}from"./index.esm.2a4190d7.js";import{a as Mt}from"./index.esm.330a194b.js";import"./iconBase.67066edd.js";const Wt=J(l),Lt=J(g),Pt={hidden:{scale:0},animate:{scale:1,transition:{staggerChildren:.5,delayChildren:.4}}},jt={hidden:{opacity:0},animate:{opacity:1}},Ht=()=>{const a=it(),[E,Z]=s.exports.useState(1),[z,Q]=s.exports.useState(10),[C,X]=s.exports.useState([]),[d,w]=s.exports.useState(null),[t,y]=s.exports.useState(null),[q,A]=s.exports.useState(!1);s.exports.useState(!1);const{isOpen:L,onOpen:P,onClose:b}=st(),[m,j]=s.exports.useState("all"),[x,$]=s.exports.useState(""),[U,D]=s.exports.useState(0),I=s.exports.useMemo(()=>{if(m==="all"||!m)return C;if(m==="blocked")return C.filter(e=>(e==null?void 0:e.status)==="blocked");if(m==="pending")return C.filter(e=>e.status==="pending");if(m==="approved")return C.filter(e=>e.status==="approved")},[C,m]),F=s.exports.useMemo(()=>x===""||!x?I:I.filter(e=>e.firstName.toLowerCase().includes(x.toLowerCase())||e.lastName.toLowerCase().includes(x.toLowerCase())),[x,I]),f=async()=>{try{const{data:e}=await At(E,z);return e.error?a({title:"Error",description:e.message,status:"error",duration:5e3,isClosable:!0,position:"top-right"}):(D(e.count||0),X(e.data),a({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"}))}catch(e){console.log(e),a({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},tt=async()=>{A(!0);try{const{data:e}=await Tt(d);e.status&&(A(!1),y(e.data),P(),a({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"})),e.status||a({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"}),A(!1)}catch{A(!1),a({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},et=async()=>{try{if(!d)return;const{data:e}=await Nt(d);e.status&&(a({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"}),b(),y(null),w(null),f()),e.status||a({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch{a({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},nt=async()=>{try{if(!d)return;const{data:e}=await Et(d);e.status&&(a({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"}),b(),y(null),w(null),f()),e.status||a({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch{a({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},ot=async()=>{try{if(!d)return;const{data:e}=await zt(d,t.reason);e.status&&(a({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"}),b(),y(null),w(null),f()),e.status||a({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch{a({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},rt=async()=>{try{if(!d)return;const{data:e}=await It(d);e.status&&(a({title:"Success",description:e.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"}),b(),y(null),w(null),f()),e.status||a({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch{a({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}};s.exports.useEffect(()=>{!d||tt()},[d]),s.exports.useEffect(()=>{f()},[E,z]);const at=lt.useCallback(e=>{var S,k,v,R,O,V,_;return o(dt,{onClose:b,isOpen:L,isCentered:!0,scrollBehavior:"inside",size:ct({base:"sm",sm:"md",md:"md",lg:"lg",xl:"xl"}),sx:{mx:2},children:[n(ht,{}),o(ut,{children:[n(gt,{children:"USER DETAILS"}),n(mt,{}),n(pt,{children:o(l,{spacing:{base:6,md:10},children:[o(g,{as:"header",children:[o(l,{direction:"row",spacing:1,justifyContent:"space-between",children:[o(c,{lineHeight:1.1,fontWeight:600,fontSize:{base:"2xl",sm:"4xl",lg:"5xl"},children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),o(B,{variant:"solid",fontWeight:"bold",bg:(t==null?void 0:t.status)==="approved"?"green.800":"red.800",children:[n(bt,{as:Bt}),n(Y,{children:t==null?void 0:t.status})]})]}),o(i,{color:h("gray.900","gray.400"),fontWeight:300,fontSize:"2xl",children:[p((t==null?void 0:t.invested)||0)," INR"]})]}),o(l,{spacing:{base:4,sm:6},direction:"column",divider:n(G,{borderColor:h("gray.200","gray.600")}),children:[o(g,{children:[n(i,{fontSize:{base:"16px",lg:"18px"},color:h("yellow.500","yellow.300"),fontWeight:"500",textTransform:"uppercase",mb:"4",children:"SUMMARY"}),n(M,{columns:{base:1,md:2},spacing:10,children:o(T,{spacing:2,children:[o(r,{children:["INVESTED:"," ",n("strong",{children:p((t==null?void 0:t.invested)||0)})]}),o(r,{children:["PROFIT:"," ",n("strong",{children:p((t==null?void 0:t.invested)||0)})]}),o(r,{children:["LOSS:"," ",n("strong",{children:p((t==null?void 0:t.invested)||0)})]})]})})]}),o(g,{children:[n(i,{fontSize:{base:"16px",lg:"18px"},color:h("yellow.500","yellow.300"),fontWeight:"500",textTransform:"uppercase",mb:"4",children:"PERSONAL Details"}),o(T,{spacing:2,children:[o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"ID:"})," ",t==null?void 0:t.id]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"First Name:"})," ",t==null?void 0:t.firstName]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"Last Name:"})," ",t==null?void 0:t.lastName]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"Phone:"})," ","+91 ",t==null?void 0:t.phone]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"Email:"})," ",t==null?void 0:t.email]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"City:"})," ",t==null?void 0:t.city]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"State:"})," ",t==null?void 0:t.state]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"Zip:"})," ",t==null?void 0:t.zip]}),o(r,{children:[n(i,{as:"span",fontWeight:"bold",children:"Address:"})," ",t==null?void 0:t.address]})]})]}),o(g,{children:[n(i,{fontSize:{base:"16px",lg:"18px"},color:h("yellow.500","yellow.300"),fontWeight:"500",textTransform:"uppercase",mb:"4",children:"BANK DETAILS"}),n(M,{columns:{base:1,md:2},spacing:10,children:o(T,{spacing:2,children:[o(r,{children:["Bank Account Type:"," ",(S=t==null?void 0:t.bankAccount)==null?void 0:S.type]}),o(r,{children:["Bank Name: ",(k=t==null?void 0:t.bankAccount)==null?void 0:k.bankName]}),o(r,{children:["Account Number:"," ",(v=t==null?void 0:t.bankAccount)==null?void 0:v.accountNo]}),o(r,{children:["IFSC: ",(R=t==null?void 0:t.bankAccount)==null?void 0:R.ifsc]}),o(r,{children:["Bank Branch Name:"," ",(O=t==null?void 0:t.bankAccount)==null?void 0:O.branch]}),n(u,{variant:"link",rightIcon:n(W,{}),onClick:()=>{var H;return window.open(N+"/assets/"+(t==null?void 0:t._id)+"/"+((H=t==null?void 0:t.bankAccount)==null?void 0:H.document))},children:"View Bank Attachment"})]})})]}),o(g,{children:[n(i,{fontSize:{base:"16px",lg:"18px"},color:h("yellow.500","yellow.300"),fontWeight:"500",textTransform:"uppercase",mb:"4",children:"IDENTITY DETAILS"}),n(M,{columns:{base:1,md:2},spacing:10,children:o(T,{spacing:2,children:[o(r,{children:["AADHAR Number: ",(V=t==null?void 0:t.aadhar)==null?void 0:V.id]}),o(r,{children:["PAN: ",(_=t==null?void 0:t.pan)==null?void 0:_.id]}),n(u,{variant:"link",rightIcon:n(W,{}),onClick:()=>window.open(N+"/assets/"+(t==null?void 0:t._id)+"/"+(t==null?void 0:t.aadhar.file)),children:"View Aadhar Attachment"}),n(u,{variant:"link",rightIcon:n(W,{}),onClick:()=>window.open(N+"/assets/"+(t==null?void 0:t._id)+"/"+(t==null?void 0:t.pan.file)),children:"View PAN Attachment"})]})})]})]})]})}),n(St,{children:o(l,{direction:"row",spacing:2,children:[(t==null?void 0:t.status)==="blocked"&&n(u,{onClick:rt,children:"Unblock"}),(t==null?void 0:t.status)==="approved"&&n(u,{onClick:et,children:"Block"}),(t==null?void 0:t.status)==="pending"&&o(Ct,{children:[n(u,{onClick:nt,children:"Approve"}),n(u,{onClick:ot,children:"Reject"})]}),n(u,{onClick:b,children:"Close"})]})})]})]})},[L]);return o(g,{sx:{minHeight:"90vh",display:"flex",flexDirection:"column",pb:4},children:[o(l,{direction:"row",justifyContent:"space-between",my:4,children:[n(c,{color:"gray.600",children:"Market Values"}),n(wt,{w:"150px",placeholder:"Search",onChange:e=>$(e.target.value),focusBorderColor:"blue.500",variant:"filled",bg:"white"})]}),n(l,{direction:"row",spacing:2,children:["all","pending","approved","blocked"].map(e=>o(B,{variant:"subtle",colorScheme:"blue",onClick:()=>j(e),cursor:"pointer",children:[n(Y,{children:e.toUpperCase()}),m===e&&n(yt,{onClick:()=>j("all")})]},e))}),n(at,{}),o(Wt,{variants:Pt,initial:"hidden",animate:"animate",direction:"column",spacing:2,sx:{px:{sm:2,lg:6},pt:4},children:[F.length===0&&o(l,{direction:"column",spacing:3,justifyContent:"center",alignItems:"center",h:"80vh",children:[n(xt,{animationData:ft,autoPlay:!0,loop:!0,style:{height:"60vh",width:"60vw"}}),n(c,{children:"No Users Found"})]}),F.map((e,S)=>{var k,v;return o(Lt,{variants:jt,px:8,py:4,rounded:"lg",shadow:"lg",bg:h("white","gray.800"),maxW:"100%",children:[n(B,{size:"md",variant:"subtle",colorScheme:"green",px:3,fontSize:"sm",fontWeight:"700",rounded:"md",children:e.status}),o(l,{direction:"row",spacing:2,mt:2,divider:n(G,{}),justifyContent:"space-evenly",children:[o(l,{direction:"column",spacing:1,children:[n(c,{fontSize:"md",children:"INVESTED"}),n(c,{fontSize:"sm",children:p(e.invested||0)})]}),o(l,{direction:"column",spacing:1,children:[n(c,{fontSize:"md",children:"PROFIT"}),n(c,{fontSize:"sm",children:p(e.invested||0)})]}),o(l,{direction:"column",spacing:1,children:[n(c,{fontSize:"md",children:"LOSS"}),n(c,{fontSize:"sm",children:p(e.invested||0)})]}),o(l,{direction:"column",spacing:1,children:[o(c,{fontSize:"md",children:["PACKAGES",n("br",{}),"BOUGHT"]}),n(c,{fontSize:"sm",children:"0"})]})]}),o(K,{justifyContent:"space-around",alignItems:"center",mt:4,children:[o(i,{fontSize:"sm",noOfLines:0,color:h("gray.600","gray.400"),children:["Created: ",kt(e.createdAt).format("dddd, DD MMMM YYYY")]}),n(u,{color:h("brand.600","brand.400"),_hover:{bg:"green.700"},size:"sm",variant:"outline",onClick:()=>{if(d===e._id)return P();w(e._id)},isLoading:q,children:"Details"}),o(K,{alignItems:"center",children:[n(Mt,{mx:4,size:"sm",src:N+"/assets/"+e._id+"/"+e.avatar,name:e.firstName+e.lastName}),n(i,{color:h("gray.700","gray.200"),fontWeight:"700",children:((k=e==null?void 0:e.firstName)==null?void 0:k.toUpperCase())+" "+((v=e==null?void 0:e.lastName)==null?void 0:v.toUpperCase())})]})]})]},S+e._id)})]}),n(g,{children:n(vt,{defaultPageSize:z,defaultPage:E,total:U,paginationProps:{display:"flex",justifyContent:"center",marginTop:"2em"},pageNeighbours:1,showQuickJumper:!0,responsive:!0,onChange:e=>Z(e),onShowSizeChange:(e,S)=>Q(parseInt(S)),showSizeChanger:!0})})]})};export{Ht as default};
