import{r as o,j as n,S as r,b as t,g as j,E as P,H as c,m as x,B as p,a as E,u as D,I,i as M,o as T,n as k,T as b,O as L,q as Y,P as B,ci as H,cj as N}from"./index.9689f1a6.js";import{c as V}from"./index.esm.a1830a40.js";function W(){return n(r,{direction:"column",spacing:3,justifyContent:"center",alignItems:"center",h:"80vh",children:[t(j,{animationData:P,autoPlay:!0,loop:!0,style:{height:"60vh",width:"60vw"}}),t(c,{children:"No Subscribers Found!"})]})}var q=o.exports.memo(W);const S=x(r);x(p);const A={hidden:{scale:0},animate:{scale:1,transition:{staggerChildren:.5,delayChildren:.4}}},F={hidden:{opacity:0},animate:{opacity:1}};function O(){E();const u=D(),[l,y]=o.exports.useState([]),[d,f]=o.exports.useState(1),[h,w]=o.exports.useState(10),[m,C]=o.exports.useState(0),[s,v]=o.exports.useState(""),a=o.exports.useMemo(()=>s.trim()?l.filter(e=>{var i;return(i=e==null?void 0:e.email)==null?void 0:i.toLowerCase().includes(s.toLowerCase())}):l,[s,l]),g=async()=>{try{const{data:e}=await H(d,h);if(e!=null&&e.error)return u({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"top-right"});y(e==null?void 0:e.data),C(e==null?void 0:e.count)}catch(e){console.error(e)}},z=async e=>{try{const{data:i}=await N(e);if(i!=null&&i.error)return u({title:"Error",description:i.message,status:"error",duration:3e3,isClosable:!0,position:"top-right"});g()}catch(i){console.error(i)}};return o.exports.useEffect(()=>{g()},[d,h]),n(p,{sx:{minHeight:"90vh",display:"flex",flexDirection:"column",pb:4},children:[n(r,{direction:"row",justifyContent:"space-between",my:4,children:[n(c,{color:"gray.600",children:["Newsletter Subscribers: ",m]}),t(I,{placeholder:"Search",value:s,onChange:e=>v(e.target.value),maxW:"150px"})]}),n(S,{variants:A,initial:"hidden",animate:"animate",direction:"column",spacing:2,sx:{px:{sm:2,lg:6},pt:4},children:[(a==null?void 0:a.length)===0&&t(q,{}),a==null?void 0:a.map((e,i)=>n(S,{direction:"row",variants:F,px:8,py:4,rounded:"lg",shadow:"lg",bg:M("white","gray.800"),maxW:"100%",justifyContent:"space-between",children:[n(r,{direction:"row",spacing:2,children:[t(T,{size:"md",variant:"subtle",colorScheme:"green",px:3,fontSize:"sm",fontWeight:"700",rounded:"md",children:e.isSubscribed?"Subscribed":"Unsubscribed"}),n(r,{direction:"row",spacing:2,mt:2,divider:t(k,{}),justifyContent:"space-evenly",children:[n(r,{direction:"column",spacing:1,children:[t(c,{fontSize:"md",children:"Subscribed on: "}),t(b,{fontSize:"sm",children:L(e==null?void 0:e.createdAt).format("DD MMM YYYY")})]}),n(r,{direction:"column",spacing:1,children:[t(c,{fontSize:"md",children:"Email: "}),t(b,{fontSize:"sm",children:e==null?void 0:e.email})]})]})]}),t(Y,{icon:t(V,{}),onClick:()=>z(e==null?void 0:e.email)})]},e._id))]}),t(p,{color:"gray.600",children:t(B,{defaultPageSize:h,defaultPage:d,total:m,paginationProps:{display:"flex",justifyContent:"center",marginTop:"2em"},pageNeighbours:1,showQuickJumper:!0,responsive:!0,onChange:e=>f(e),onShowSizeChange:(e,i)=>w(parseInt(i)),showSizeChanger:!0})})]})}export{O as default};
