import{D as fe}from"./index.esm.a1830a40.js";import{F as Be,a as Le}from"./index.esm.2c397c46.js";import{Z as B,a9 as Ue,aa as ue,Y as _e,_ as He,$ as Oe,R as S,r,ab as Ve,ac as ce,ad as je,ae as de,af as $e,ag as ye,b as a,ah as Ee,j as t,ai as Me,aj as Ye,ak as ie,al as le,am as Pe,an as se,O as he,m as Te,S as d,B as oe,e as qe,ao as Ke,u as We,H as ve,i as f,ap as Xe,aq as Ce,T as m,I as g,o as be,a4 as Se,ar as ke,q as xe,c as F,as as De,at as Je,au as Ze}from"./index.9689f1a6.js";import{T as Fe}from"./index.esm.2a4190d7.js";import{S as Ie}from"./ScrollModal.79297ce6.js";import"./iconBase.67066edd.js";var pe={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Qe=B("span",{baseStyle:pe});Qe.displayName="VisuallyHidden";var ea=B("input",{baseStyle:pe});ea.displayName="VisuallyHiddenInput";var[Da,aa]=Ue({name:"CheckboxGroupContext",strict:!1}),na=(...l)=>l.filter(Boolean).join(" "),y=l=>l?"":void 0;function x(...l){return function(s){l.some(i=>(i==null||i(s),s==null?void 0:s.defaultPrevented))}}function ta(...l){return function(s){l.forEach(i=>{i==null||i(s)})}}function ra(l){return S.createElement(B.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...l},S.createElement("polyline",{points:"1.5 6 4.5 9 10.5 1"}))}function oa(l){return S.createElement(B.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...l},S.createElement("line",{x1:"21",x2:"3",y1:"12",y2:"12"}))}function ia(l){const{isIndeterminate:c,isChecked:s,...i}=l,I=c?oa:ra;return s||c?S.createElement(B.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},S.createElement(I,{...i})):null}function la(l,c=[]){const s=Object.assign({},l);for(const i of c)i in s&&delete s[i];return s}function sa(l={}){const c=Ve(l),{isDisabled:s,isReadOnly:i,isRequired:I,isInvalid:h,id:w,onBlur:W,onFocus:n,"aria-describedby":P}=c,{defaultChecked:T,isChecked:R,isFocusable:C,onChange:E,isIndeterminate:k,name:A,value:X,tabIndex:L=void 0,"aria-label":M,"aria-labelledby":U,"aria-invalid":v,..._}=l,D=la(_,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),Y=ce(E),H=ce(W),O=ce(n),[V,te]=r.exports.useState(!1),[z,j]=r.exports.useState(!1),[J,ne]=r.exports.useState(!1),[Z,G]=r.exports.useState(!1);r.exports.useEffect(()=>je(te),[]);const p=r.exports.useRef(null),[$,b]=r.exports.useState(!0),[N,Q]=r.exports.useState(!!T),ee=R!==void 0,e=ee?R:N,u=r.exports.useCallback(o=>{if(i||s){o.preventDefault();return}ee||Q(e?o.target.checked:k?!0:o.target.checked),Y==null||Y(o)},[i,s,e,ee,k,Y]);de(()=>{p.current&&(p.current.indeterminate=Boolean(k))},[k]),$e(()=>{s&&j(!1)},[s,j]),de(()=>{const o=p.current;!(o!=null&&o.form)||(o.form.onreset=()=>{Q(!!T)})},[]);const ae=s&&!C,ge=r.exports.useCallback(o=>{o.key===" "&&G(!0)},[G]),me=r.exports.useCallback(o=>{o.key===" "&&G(!1)},[G]);de(()=>{if(!p.current)return;p.current.checked!==e&&Q(p.current.checked)},[p.current]);const Ae=r.exports.useCallback((o={},q=null)=>{const K=re=>{z&&re.preventDefault(),G(!0)};return{...o,ref:q,"data-active":y(Z),"data-hover":y(J),"data-checked":y(e),"data-focus":y(z),"data-focus-visible":y(z&&V),"data-indeterminate":y(k),"data-disabled":y(s),"data-invalid":y(h),"data-readonly":y(i),"aria-hidden":!0,onMouseDown:x(o.onMouseDown,K),onMouseUp:x(o.onMouseUp,()=>G(!1)),onMouseEnter:x(o.onMouseEnter,()=>ne(!0)),onMouseLeave:x(o.onMouseLeave,()=>ne(!1))}},[Z,e,s,z,V,J,k,h,i]),ze=r.exports.useCallback((o={},q=null)=>({...D,...o,ref:ye(q,K=>{!K||b(K.tagName==="LABEL")}),onClick:x(o.onClick,()=>{var K;$||((K=p.current)==null||K.click(),requestAnimationFrame(()=>{var re;(re=p.current)==null||re.focus()}))}),"data-disabled":y(s),"data-checked":y(e),"data-invalid":y(h)}),[D,s,e,h,$]),Ge=r.exports.useCallback((o={},q=null)=>({...o,ref:ye(p,q),type:"checkbox",name:A,value:X,id:w,tabIndex:L,onChange:x(o.onChange,u),onBlur:x(o.onBlur,H,()=>j(!1)),onFocus:x(o.onFocus,O,()=>j(!0)),onKeyDown:x(o.onKeyDown,ge),onKeyUp:x(o.onKeyUp,me),required:I,checked:e,disabled:ae,readOnly:i,"aria-label":M,"aria-labelledby":U,"aria-invalid":v?Boolean(v):h,"aria-describedby":P,"aria-disabled":s,style:pe}),[A,X,w,u,H,O,ge,me,I,e,ae,i,M,U,v,h,P,s,L]),Ne=r.exports.useCallback((o={},q=null)=>({...o,ref:q,onMouseDown:x(o.onMouseDown,we),onTouchStart:x(o.onTouchStart,we),"data-disabled":y(s),"data-checked":y(e),"data-invalid":y(h)}),[e,s,h]);return{state:{isInvalid:h,isFocused:z,isChecked:e,isActive:Z,isHovered:J,isIndeterminate:k,isDisabled:s,isReadOnly:i,isRequired:I},getRootProps:ze,getCheckboxProps:Ae,getInputProps:Ge,getLabelProps:Ne,htmlProps:D}}function we(l){l.preventDefault(),l.stopPropagation()}var ca={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},da={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},ua=ue({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),ha=ue({from:{opacity:0},to:{opacity:1}}),pa=ue({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),Re=_e(function(c,s){const i=aa(),I={...i,...c},h=He("Checkbox",I),w=Oe(c),{spacing:W="0.5rem",className:n,children:P,iconColor:T,iconSize:R,icon:C=S.createElement(ia,null),isChecked:E,isDisabled:k=i==null?void 0:i.isDisabled,onChange:A,inputProps:X,...L}=w;let M=E;(i==null?void 0:i.value)&&w.value&&(M=i.value.includes(w.value));let U=A;(i==null?void 0:i.onChange)&&w.value&&(U=ta(i.onChange,A));const{state:v,getInputProps:_,getCheckboxProps:D,getLabelProps:Y,getRootProps:H}=sa({...L,isDisabled:k,isChecked:M,onChange:U}),O=r.exports.useMemo(()=>({animation:v.isIndeterminate?`${ha} 20ms linear, ${pa} 200ms linear`:`${ua} 200ms linear`,fontSize:R,color:T,...h.icon}),[T,R,,v.isIndeterminate,h.icon]),V=r.exports.cloneElement(C,{__css:O,isIndeterminate:v.isIndeterminate,isChecked:v.isChecked});return S.createElement(B.label,{__css:{...da,...h.container},className:na("chakra-checkbox",n),...H()},S.createElement("input",{className:"chakra-checkbox__input",..._(X,s)}),S.createElement(B.span,{__css:{...ca,...h.control},className:"chakra-checkbox__control",...D()},V),P&&S.createElement(B.span,{className:"chakra-checkbox__label",...Y(),__css:{marginStart:W,...h.label}},P))});Re.displayName="Checkbox";const ga=({dailyChange:l})=>a(Ee,{children:t(Me,{size:"sm",children:[a(Ye,{children:t(ie,{children:[a(le,{children:"Date:"}),a(le,{children:"Daily Change %"})]})}),a(Pe,{children:l.map(c=>t(ie,{children:[a(se,{children:he(c.x).format("YYYY-MM-DD")}),t(se,{children:[c.y,"%"]})]},c.x))})]})}),ma=({fundGraph:l})=>a(Ee,{children:t(Me,{size:"sm",children:[a(Ye,{children:t(ie,{children:[a(le,{children:"Date:"}),a(le,{children:"Fund Value"})]})}),a(Pe,{children:l.map(c=>t(ie,{children:[a(se,{children:he(c.x).format("YYYY-MM-DD")}),t(se,{children:[c.y," /-"]})]},c.x))})]})}),fa=Te(d);Te(oe);const Fa=()=>{qe();const l=Ke(),c=We();r.exports.useState(1),r.exports.useState(10),r.exports.useState([]);const[s,i]=r.exports.useState(!0),[I,h]=r.exports.useState(!1),[w,W]=r.exports.useState(!1),[n,P]=r.exports.useState(null),[T,R]=r.exports.useState("HIGH"),[C,E]=r.exports.useState([]),k=S.useRef(null),[A,X]=r.exports.useState(0),L=S.useRef(null),[M,U]=r.exports.useState(!1),[v,_]=r.exports.useState(null),[D,Y]=r.exports.useState(null),[H,O]=r.exports.useState(""),[V,te]=r.exports.useState(""),[z,j]=r.exports.useState(""),[J,ne]=r.exports.useState(0),[Z,G]=r.exports.useState("SHORT"),[p,$]=r.exports.useState({oneYear:0,threeYears:0,fiveYears:0}),[b,N]=r.exports.useState({threeMonths:0,sixMonths:0,oneYear:0,threeYears:0,fiveYears:0}),Q=async()=>{if(!!l.id)try{const{data:e}=await Je(l.id);e.status&&(P(e.data),i(!1)),e.status||c({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch(e){console.log(e),c({title:"Error",description:"Could not get fund details",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},ee=async()=>{try{const e=new FormData;e.append("_id",n._id),e.append("todayValue",A),e.append("name",H),e.append("description",V),e.append("duration",Z),e.append("shortDescription",z),e.append("minimumInvestment",J),e.append("cagr",JSON.stringify(p)),e.append("returns",JSON.stringify(b)),e.append("riskCategory",T),e.append("shares",JSON.stringify(C)),e.append("trending",M),v&&e.append("dailyChangeFile",v),D&&e.append("fundGraphFile",D);const{data:u}=await Ze(e);u.status&&(P(u.data),_(null),Y(null),c({title:"Success",description:u.message,status:"success",duration:3e3,isClosable:!0,position:"bottom-right"})),u.status||c({title:"Error",description:u.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch(e){console.log("\u{1F680} ~ file: FundUpdate.jsx ~ line 262 ~ handleFundUpdate ~ e",e),c({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}};return r.exports.useEffect(()=>{Q()},[]),r.exports.useEffect(()=>{n!=null&&n.name&&O(n.name),n!=null&&n.description&&te(n.description),n!=null&&n.shortDescription&&j(n.shortDescription),n!=null&&n.minimumInvestment&&ne(n.minimumInvestment),n!=null&&n.riskCategory&&R(n.riskCategory),n!=null&&n.cagr&&$(n.cagr),n!=null&&n.returns&&N(n.returns),n!=null&&n.shares&&E(n.shares)},[n]),t(oe,{sx:{minHeight:"90vh",display:"flex",flexDirection:"column",pb:4},children:[t(ve,{fontSize:"4xl",mb:5,children:["UPDATE FUND: ",n==null?void 0:n.name]}),t(fa,{direction:"column",spacing:5,mt:10,children:[a(ve,{fontSize:"2xl",color:f("gray.500","gray.200"),children:"Please Fill Below details properly to update the FUND."}),t(Xe,{columns:[1,1,2,2],spacing:5,p:3,children:[a(Ce,{children:t(d,{direction:"column",spacing:4,children:[t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Name:"," "]}),a(g,{placeholder:"Enter Fund Name",onChange:e=>O(e.target.value),variant:"filled",value:H})]}),t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Short Description:"," "]}),a(g,{placeholder:"Enter Fund Short Description",variant:"filled",onChange:e=>j(e.target.value),value:z})]}),t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Long Description:"," "]}),a(g,{placeholder:"Enter Fund Long Description",variant:"filled",onChange:e=>te(e.target.value),value:V})]}),t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Minimum Investment:"," "]}),a(g,{placeholder:"Enter Fund Minimum Investment",variant:"filled",type:"number",onChange:e=>ne(e.target.value),value:J})]}),t(d,{direction:"row",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Trending:"," "]}),a(Re,{variant:"filled",checked:M,onChange:()=>U(!M)})]}),t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Risk Category:"," "]}),a(d,{direction:"row",children:["HIGH","MEDIUM","LOW"].map((e,u)=>t(be,{size:"md",variant:"solid",px:3,py:2,colorScheme:u===0&&"red"||u===1&&"green"||u===2&&"blue",as:"button",onClick:()=>R(e),children:[a(Se,{children:e}),e===T&&a(ke,{as:Fe})]},u))})]}),t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Duration:"," "]}),a(d,{direction:"row",children:["SHORT","MEDIUM","LONG"].map((e,u)=>t(be,{size:"md",variant:"solid",px:3,py:2,colorScheme:u===0&&"red"||u===1&&"green"||u===2&&"blue",as:"button",onClick:()=>G(e),children:[a(Se,{children:e}),e===Z&&a(ke,{as:Fe})]},u+e))})]}),t(d,{direction:"column",spacing:4,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Shares Allocation:"," "]}),t(d,{direction:"row",spacing:2,children:[a(m,{sx:{alignSelf:"center"},children:"ADD NEW SHARE ALLOCATION"}),a(xe,{size:"sm",onClick:()=>E([...C,{name:"Change Name",allocation:0}]),children:a(Be,{})})]}),C.map((e,u)=>a(d,{direction:"column",spacing:4,children:t(d,{direction:"row",spacing:2,children:[a(g,{variant:"filled",placeholder:"Enter Name",value:e.name,onChange:ae=>{C[u].name=ae.target.value,E([...C])}}),a(g,{variant:"filled",placeholder:"Enter Allocation",value:e.allocation,type:"number",onChange:ae=>{C[u].allocation=parseFloat(ae.target.value),E([...C])}}),u!==0&&a(xe,{size:"sm",sx:{alignSelf:"center"},onClick:()=>{C.splice(u,1),E([...C])},children:a(Le,{})})]})},u+u+1))]})]})}),a(Ce,{children:t(d,{direction:"column",spacing:4,children:[t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund CAGR:"," "]}),t(d,{direction:"row",spacing:2,children:[a(g,{variant:"filled",type:"number",onChange:e=>$({...p,oneYear:parseFloat(e.target.value)}),value:p.oneYear}),a(g,{placeholder:"3 Yrs",onChange:e=>$({...p,threeYears:parseFloat(e.target.value)}),value:p.threeYears,variant:"filled",type:"number"}),a(g,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>$({...p,fiveYears:parseFloat(e.target.value)}),value:p.fiveYears})]})]}),t(d,{direction:"column",spacing:2,children:[t(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:["Fund Returns:"," "]}),t(d,{direction:"row",spacing:2,children:[a(g,{placeholder:"3 Months",onChange:e=>N({...b,threeMonths:parseFloat(e.target.value)}),variant:"filled",type:"number",value:b.threeMonths}),a(g,{placeholder:"6 Months",onChange:e=>N({...b,sixMonths:parseFloat(e.target.value)}),variant:"filled",type:"number",value:b.sixMonths})]}),t(d,{direction:"row",spacing:2,children:[a(g,{placeholder:"1 Yr",variant:"filled",type:"number",onChange:e=>N({...b,oneYear:parseFloat(e.target.value)}),value:b.oneYear}),a(g,{placeholder:"3 Yrs",variant:"filled",type:"number",onChange:e=>N({...b,threeYears:parseFloat(e.target.value)}),value:b.threeYears}),a(g,{placeholder:"5 Yrs",variant:"filled",type:"number",onChange:e=>N({...b,fiveYears:parseFloat(e.target.value)}),value:b.fiveYears})]})]}),a(d,{direction:"column",spacing:2,children:n&&t(oe,{children:[t(d,{direction:"row",spacing:2,sx:{my:4},children:[t(d,{direction:"column",spacing:1,children:[t(m,{children:[he().format("YYYY-MM-DD")," Value:"]}),a(g,{placeholder:"% Value",onChange:e=>X(e.target.value),variant:"filled",type:"number",value:A})]}),a(F,{variant:"outline",sx:{alignSelf:"flex-end"},onClick:ee,children:"UPDATE Daily Change"})]}),a(F,{variant:"outline",onClick:()=>h(!0),children:"Show Daily Change Table"}),a(Ie,{showDailyChange:I,setShowDailyChange:h,dailyChange:n.dailyChange,title:"Daily Change Table",children:a(ga,{dailyChange:n.dailyChange})})]})}),t(d,{direction:"column",spacing:2,children:[a(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:"Fund Daily Change File: (.csv files only, MAX SIZE: 2MB)"}),a(g,{ref:k,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return c({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});_(e.target.files[0])}}),t(m,{color:f("gray.600","gray.200"),children:["Uploaded: ",v&&v.name]}),v&&a(F,{variant:"outline",leftIcon:a(fe,{}),onClick:()=>_(null),children:"DISCARD FILE"}),a(F,{variant:"outline",onClick:()=>k.current.click(),children:"Upload File"}),a(F,{variant:"outline",onClick:()=>window.open(`${De}/${n._id}/${n.dailyChangeFile}`),children:"Download Current DailyChange File"})]}),t(d,{direction:"column",spacing:2,children:[a(m,{fontSize:"lg",color:f("gray.500","gray.400"),children:"Fund Graph File: (.csv files only, MAX SIZE: 2MB)"}),a(g,{ref:L,display:"none","aria-hidden":"true",accept:".csv",type:"file",onChange:e=>{if(e.target.files.length>0&&e.target.files[0].size>2e6)return c({title:"File size is too large",description:"Please upload a file less than 2MB",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});Y(e.target.files[0])}}),a(d,{direction:"column",spacing:2,children:n&&t(oe,{children:[a(F,{variant:"outline",onClick:()=>W(!0),children:"Show Fund Graph Table"}),a(Ie,{showDailyChange:w,setShowDailyChange:W,title:"Fund Graph Table",children:a(ma,{fundGraph:n.fundGraph})})]})}),t(m,{color:f("gray.600","gray.200"),children:["Uploaded: ",D&&D.name]}),D&&a(F,{variant:"outline",leftIcon:a(fe,{}),onClick:()=>Y(null),children:"DISCARD FILE"}),a(F,{variant:"outline",onClick:()=>L.current.click(),children:"Upload File"}),a(F,{variant:"outline",onClick:()=>window.open(`${De}/${n._id}/${n.fundGraphFile}`),children:"Download Current FundGraph File"})]}),a(F,{variant:"outline",onClick:ee,children:"UPDATE FUND"})]})})]})]})]})};export{Fa as default};
