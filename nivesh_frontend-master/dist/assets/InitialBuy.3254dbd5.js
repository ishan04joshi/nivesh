import{a as S,ao as I,e as R,u as z,r as n,j as a,S as i,c3 as P,b as o,c4 as N,T as c,H as h,bK as T,bL as g,I as B,c as E,i as y,at as A,c5 as _,b2 as b}from"./index.9689f1a6.js";const G=()=>{const e=S(r=>r.user),{id:l}=I();R();const s=z(),[j,f]=n.exports.useState(!0);n.exports.useState(!1);const[t,w]=n.exports.useState(null),[u,p]=n.exports.useState("one-time"),[d,v]=n.exports.useState(0),C=async()=>{if(!!l)try{const{data:r}=await A(l);r.status&&(w(r.data),f(!1)),r.status||s({title:"Error",description:r.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}catch{s({title:"Error",description:"Could not get fund details",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}},k=async()=>{if(d<t.minimumInvestment)return s({title:"Error",description:"Minimum investment is \u20B9"+t.minimumInvestment,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});try{const{data:r}=await _({amount:d,id:l,purchaseType:u});if(console.log(r),r.error)return s({title:"Error",description:r.message,status:"error",duration:3e3,isClosable:!0,position:"bottom-right"});if(r.recurring){const m={key:r.key,currency:"INR",name:t==null?void 0:t.name,description:t==null?void 0:t.description,image:"/src/favicon.svg",subscription_id:r.subscription.id,callback_url:`${b}/api/v1/verification`,prefill:{name:(e==null?void 0:e.firstName)+" "+(e==null?void 0:e.lastName),email:e==null?void 0:e.email,contact:e==null?void 0:e.phone},notes:{address:"Razorpay Corporate Office"},theme:{color:"#121212"},notify:{sms:!0,email:!0},options:{checkout:{readonly:{email:!0,contact:!0},method:{netbanking:!0,card:!0,upi:!0,wallet:!0}}}};new window.Razorpay(m).open()}else{const m={key:r.key,amount:r.order.amount,currency:"INR",name:t==null?void 0:t.name,description:t==null?void 0:t.description,image:"/src/favicon.svg",order_id:r.order.id,callback_url:`${b}/api/v1/verification`,prefill:{name:(e==null?void 0:e.firstName)+" "+(e==null?void 0:e.lastName),email:e==null?void 0:e.email,contact:e==null?void 0:e.phone},notes:{address:"Razorpay Corporate Office"},theme:{color:"#121212"},notify:{sms:!0,email:!0},options:{checkout:{readonly:{email:!0,contact:!0},method:{netbanking:!0,card:!0,upi:!0,wallet:!0}}}};new window.Razorpay(m).open()}}catch(r){console.log(r),s({title:"Error",description:"Could not get fund details",status:"error",duration:3e3,isClosable:!0,position:"bottom-right"})}};return n.exports.useEffect(()=>{C()},[l]),a(i,{spacing:3,children:[a(P,{status:"info",w:"fit-content",children:[o(N,{}),"2% Processing Fees will be added."]}),o(c,{children:"Buying..."}),a(i,{spacing:4,mt:10,border:"1px",borderRadius:"md",p:3,children:[a(i,{direction:"row",justifyContent:"space-between",children:[o(h,{children:t==null?void 0:t.name}),a(h,{children:["\u20B9 ",t==null?void 0:t.minimumInvestment]})]}),o(c,{children:t==null?void 0:t.description})]}),a(i,{direction:"row",spacing:25,mt:8,children:[o(c,{children:"Purchase Type:"}),o(T,{defaultValue:u,children:a(i,{children:["onChange=",()=>p("recurring"),o(g,{value:"one-time",isChecked:u==="one-time",children:"One Time Payment"}),o(g,{value:"recurring",isChecked:u==="recurring",onChange:()=>p("recurring"),children:"SIP / Recurring"})]})})]}),a(i,{direction:"row",spacing:5,mt:8,children:[o(c,{children:"Purchase Amount:"}),o(c,{children:"\u20B9"}),o(B,{type:"number",placeholder:"Enter Amount",onChange:r=>v(r.target.value),w:"fit-content"})," "]}),a(E,{rounded:"none",w:"full",mt:8,size:"lg",py:"7",bg:y("gray.900","gray.50"),color:y("white","gray.900"),textTransform:"uppercase",_hover:{transform:"translateY(2px)",boxShadow:"lg"},onClick:k,children:["BUY - ",d]})]})};export{G as default};
